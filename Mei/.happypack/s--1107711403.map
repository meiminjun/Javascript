{"version":3,"sources":["src/util/ald.js"],"names":["aladdin","bow","types","tryLogin","config","emptyFunction","isAladdinHybrid","ua","navigator","userAgent","indexOf","requestCount","needLoginCode","http","request","options","cb","window","__store","commit","COMMON_LOADING","err","res","console","info","json","JSON","parse","body","e","responseCode","fetch","beforeSend","complete","interfaceEnv","ENV","hostname","otherHostName","url","error","default","process","env","NODE_ENV","isproxy","_beforeSend","loading","dir","start","canCancel","warn","_complete","stop","defaultOptions","method","qs","timeout","xhrFields","withCredentials","resolve","reject","String","code","jsonp","name","params","_parseData","data","ret","key","encodeURIComponent","substr","_removeElement","elem","parent","parentNode","nodeType","removeChild","match","exec","jsonpCallback","Date","getTime","Math","random","toString","replace","script","document","createElement","type","src","id","undefined","getElementById","head","getElementsByTagName","appendChild","forward","back","doForward","opts","test","history","replaceState","location","origin","title","go","reload","_toQueryPair","value","_toQueryString","obj","values","constructor","Array","queryValues","i","len","length","push","concat","join","_doForward","nav","router","routerhost","searchStr","href","Object","index","store","localStorage","setItem","getItem","removeItem","clear","sessionStorage","track","record","talkingData","trackEvent","eventId","event","on","off","once","toast","show","callback","defalut","message","position","dialog","alert","buttonText","buttonCallback","confirm","leftButtonText","leftButtonCallback","rightButtonText","rightButtonCallback"],"mappings":"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","file":"ald.js","sourceRoot":"/Users/apple/Documents/github/Javascript/Mei","sourcesContent":["import * as aladdin from 'aladdin'\nimport bow from 'bow'\nimport * as types from '../store/types'\nimport { tryLogin } from './acc'\nimport config from '../../config'\n// import loading from 'loading'\n\nvar emptyFunction = function () {}\n/**\n * ald和bow接口封装\n */\nexport function isAladdinHybrid () {\n  const ua = navigator.userAgent + ''\n  return ua.indexOf('AladdinHybrid') !== -1\n}\n\nlet requestCount = 0\nconst needLoginCode = ['291007', '291005', '291001']\n// 请求相关\nexport const http = {\n  request: function (options, cb) {\n    if (requestCount++ === 0) {\n      window.__store.commit(types.COMMON_LOADING, true)\n    }\n    bow.http.request(options, function (err, res) {\n      if (requestCount === 0 || --requestCount === 0) {\n        window.__store.commit(types.COMMON_LOADING, false)\n      }\n            // 公共异常处理\n      if (err) {\n        return console.info('服务器异常', err)\n      }\n            // console.log(res);\n      let json\n      try {\n        json = JSON.parse(res.body)\n      } catch (e) {\n        json = null\n      }\n      let responseCode = json && json.responseCode ? json.responseCode : ''\n      // 在列表内的代码需要登录～\n      if (needLoginCode.indexOf(responseCode) != -1) {\n        tryLogin()\n      } else {\n        cb(json || {})\n      }\n    })\n  },\n  /**\n   * 请求方法\n   * @param  {[type]} options [qs:请求参数，url:请求地址，method:请求方式（默认post）]\n   * @return {[type]}         [description]\n   */\n  fetch: function (options) {\n    var beforeSend = options.beforeSend || emptyFunction\n    var complete = options.complete || emptyFunction\n    var interfaceEnv = ENV\n    var hostname = ''\n    var otherHostName = ''\n    if (options && typeof options.url === 'undefined') {\n      console.error('请检查你的请求url是否存在')\n      return\n    }\n    if (!config.url[options.url]) {\n      console.error('请检查你的config/url中里是否设置接口url')\n      return\n    }\n    // stg或者是prd环境\n    if (interfaceEnv !== 'web') {\n      if (!config.hostname[interfaceEnv]) {\n        console.error('请检查config/index中是否有该环境')\n        return\n      }\n      hostname = config.hostname[interfaceEnv].default\n      if (process.env.NODE_ENV !== 'development') {\n        // 如果接口，有其他环境，请自行添加config/index中的hostname中stg对象中添加对应的域名\n        // 请检查stg测试接口中是否有除default的其他环境接口，如果有，那么请检查生产环境prd下是不是也会有同样的情况，有的话也一定要在config/index中的hostname中prd中加上同样的生产域名\n        if (interfaceEnv !== 'prd' && options.env) {\n          otherHostName = config.hostname[interfaceEnv][options.env]\n          if (otherHostName) {\n            options.url = otherHostName + config.url[options.url]\n          } else {\n            options.url = hostname + config.url[options.url]\n          }\n        } else {\n          // 生产环境\n          options.url = hostname + config.url[options.url]\n        }\n      } else {\n        // 代理开关\n        if (!config.isproxy) {\n          otherHostName = config.hostname[interfaceEnv][options.env]\n          if (otherHostName) {\n            options.url = otherHostName + config.url[options.url]\n          } else {\n            options.url = hostname + config.url[options.url]\n          }\n        } else {\n          // 本地开发调试(跨域)\n          options.url = config.url[options.url]\n        }\n      }\n    } else if (interfaceEnv === 'web') { // 本地mock调试\n      options.url = 'api/' + options.url\n    }\n    // 请求之前\n    function _beforeSend () {\n      if (requestCount++ === 0) {\n        window.__store.commit(types.COMMON_LOADING, true)\n        if (bow.loading) {\n          console.dir(bow.loading)\n          bow.loading.start({ canCancel: false })\n        } else {\n          console.warn('bow.loading plugin is needed!')\n        }\n      }\n      beforeSend()\n    }\n    // 请求之后\n    function _complete () {\n      if (requestCount === 0 || --requestCount === 0) {\n        window.__store.commit(types.COMMON_LOADING, false)\n        if (bow.loading) {\n          bow.loading.stop()\n        } else {\n          console.warn('bow.loading plugin is needed! ')\n        }\n      }\n      complete()\n    }\n    const defaultOptions = {\n      url: '',  // 请求地址\n      method: 'POST', // 请求方式\n      qs: null, // 请求参数\n      timeout: 60000,\n      xhrFields: {withCredentials: true}\n    }\n    options = Object.assign({}, defaultOptions, options)\n    // if (requestCount++ === 0) {\n    //   window.__store.commit(types.COMMON_LOADING, true)\n    // }\n    return new Promise((resolve, reject) => {\n      _beforeSend()\n      bow.http.request(options, function (err, res) {\n        _complete()\n        // 公共异常处理\n        if (err) {\n          if (String(err.code) === '404') {\n            console.error('没有该接口:' + options.url)\n          } else {\n            console.error('服务器异常', err)\n          }\n          return\n        }\n        let json\n        try {\n          json = JSON.parse(res.body)\n        } catch (e) {\n          console.error('json解析错误', e)\n          json = null\n        }\n\n        let responseCode = json && json.responseCode ? json.responseCode : ''\n        if (needLoginCode.indexOf(responseCode) != -1) {\n          tryLogin()\n        } else {\n          resolve(json || {})\n        }\n      })\n    })\n  },\n    /**\n     * JSONP跨域请求\n     *\n     *\n     * @param options\n     * @param cb\n     */\n  jsonp: function (options, cb) {\n        // if(requestCount++ === 0) {\n        //     storeInstance.commit(\"loading\", true)\n        // }\n    let name,\n      url = options.url,\n      params = options.params || {},\n      _parseData = function (data) {\n        let ret = ''\n        if (typeof data === 'string') {\n          ret = data\n        } else if (typeof data === 'object') {\n          for (let key in data) {\n            ret += '&' + key + '=' + encodeURIComponent(data[key])\n          }\n        }\n                // 加个时间戳，防止缓存\n                // ret += \"&_time=\" + (new Date()).getTime();\n        ret = ret.substr(1)\n        return ret\n      },\n      _removeElement = function (elem) {\n        let parent = elem.parentNode\n\n        if (parent && parent.nodeType !== 11) {\n          parent.removeChild(elem)\n        }\n      }\n\n    url = url + (url.indexOf('?') === -1 ? '?' : '&') + _parseData(params)\n\n    let match = /callback=(\\w+)/.exec(url)\n\n    if (match && match[1]) {\n      name = match[1]\n    } else {\n      name = options.jsonpCallback || 'jsonp_' + (new Date()).getTime() + '_' + Math.random().toString().substr(2)\n      url = url.replace('callback=?', 'callback=' + name)\n      url = url.replace('callback=%3F', 'callback=' + name)\n    }\n\n    let script = document.createElement('script')\n    script.type = 'text/javascript'\n    script.src = url\n    script.id = 'id_' + name\n\n    window[name] = function (json) {\n      window[name] = undefined\n      let elem = document.getElementById('id_' + name)\n      _removeElement(elem)\n            // if(requestCount === 0 || --requestCount === 0){\n            //     storeInstance.commit(\"loading\", false)\n            // }\n      cb(json)\n    }\n\n        // 在head里面插入script元素\n    let head = document.getElementsByTagName('head')\n    if (head && head[0]) {\n      head[0].appendChild(script)\n    }\n  }\n}\n\n// 跳转相关\nexport const navigator = {\n  forward: function (options) {\n    bow.navigator.forward(options)\n  },\n  back: function () {\n    bow.navigator.back()\n  }\n}\n\nfunction doForward (opts) {\n  let url = opts.url\n  let ua = navigator.userAgent + ''\n  if (/android/ig.test(ua) && history.replaceState && (!/(http:|https:)/g.test(url) || url.indexOf(location.origin) != -1)) {\n    history.replaceState(null, document.title, url)\n    history.go(0)\n    if (navigator.userAgent.match(/QQBrowser/ig)) { // 处理qq浏览器不会刷新的bug\n      location.reload()\n    }\n  } else {\n    window.location.replace(url)\n  }\n}\n\nfunction _toQueryPair (key, value) {\n  if (typeof value === 'undefined') {\n    return key\n  }\n  return key + '=' + encodeURIComponent(value === null ? '' : String(value))\n}\n\n/**\n * 将对象解析成查询参数\n * @param  {[type]} obj [description]\n * @return {[type]}     [description]\n * _toQueryString({\n *   name : 'xesam',\n *   age : 24\n * })); //name=xesam&age=24\n * _toQueryString({\n *  name : 'xesam',\n *  age : [24,25,26]\n *  }) //name=xesam&age=24&age=25&age=26\n */\nfunction _toQueryString (obj) {\n  var ret = []\n  for (var key in obj) {\n    key = encodeURIComponent(key)\n    var values = obj[key]\n    if (values && values.constructor === Array) { // 数组\n      var queryValues = []\n      for (var i = 0, len = values.length, value; i < len; i++) {\n        value = values[i]\n        queryValues.push(_toQueryPair(key, value))\n      }\n      ret = ret.concat(queryValues)\n    } else { // 字符串\n      ret.push(_toQueryPair(key, values))\n    }\n  }\n  return ret.join('&')\n}\n\n// 跳转相关\nfunction _doForward (opts) {\n  const url = opts.url\n  const ua = navigator.userAgent + ''\n  if (/android/ig.test(ua) && history.replaceState && (!/(http:|https:)/g.test(url) || url.indexOf(location.origin) != -1)) {\n    history.replaceState(null, document.title, url)\n    history.go(0)\n    if (navigator.userAgent.match(/QQBrowser/ig)) { // 处理qq浏览器不会刷新的bug\n      location.reload()\n    }\n  } else {\n    window.location.replace(url)\n  }\n}\n\n// 目前支持的是app 内跳转\nexport const nav = {\n  // to: function (options) {\n  //   let {replace, ...opts} = options\n  //   if (replace) {\n  //     doForward(opts)\n  //   } else {\n  //     bow.navigator.forward(opts)\n  //   }\n  // },\n  /**\n   * bow文档地址：http://10.20.20.177/guide/component.html#aladdin-navigator-back-opts-cb\n   * @param  {[type]} options [一般情况只要传url]\n   * @return {[type]}         [description]\n   */\n  forward: function (options) {\n    if (!options.url) {\n      console.error('请检查你的跳转url是否存在')\n      return\n    }\n    var router = config.router\n    var routerhost = config.routerhost\n    var env = ENV\n    var url = ''\n    var searchStr\n    if (!router[options.url]) {\n      console.error('conifg/url的配置中不存在' + options.url + '路由地址')\n      return\n    }\n    url = router[options.url]\n    // config/router的stg、prd开发环境\n    if (process.env.NODE_ENV !== 'development') {\n      if (options.env) {\n        options.url = routerhost[env][options.env] + url\n      } else {\n        options.url = url\n      }\n    } else {\n      // 开发环境\n      if (options.env) {\n        options.url = routerhost['development'][options.env] + url\n      } else {\n        options.url = url\n      }\n    }\n    options = Object.assign({}, options)\n    if (typeof options.type === 'string') {\n      if (options.qs) {\n        searchStr = _toQueryString(options.qs)\n        options.url = options.url + '?' + searchStr\n      }\n      if (options.replace) {\n        window.location.replace(options.url)\n      } else {\n        window.location.href = options.url\n      }\n    } else {\n      bow.navigator.forward(options)\n    }\n  },\n  /**\n   * @param  {[type]} options [description]\n   * @return {[type]}         [description]\n   */\n  back: function (options) {\n    if (typeof options !== 'number' && options instanceof Object) {\n      bow.navigator.back(options)\n    } else {\n      var index = typeof options === 'undefined' ? -1 : options\n      window.location.go(index)\n    }\n  }\n}\n\n// 存储相关\nexport const store = {\n  localStorage: {\n    setItem: function (options, cb) {\n      aladdin.localStorage.setItem(options.key, options.value, true, '3DES', cb)\n    },\n    getItem: function (key, cb) {\n      aladdin.localStorage.getItem(key, true, '3DES', cb)\n    },\n    removeItem: aladdin.localStorage.removeItem,\n    clear: aladdin.localStorage.clear\n  },\n  sessionStorage: {\n    setItem: aladdin.sessionStorage.setItem,\n    getItem: aladdin.sessionStorage.getItem,\n    removeItem: aladdin.sessionStorage.removeItem,\n    clear: aladdin.sessionStorage.clear\n  }\n}\n\n// 埋点\nexport const track = {\n  record: function (options) {\n    console.info(options)\n    bow.talkingData.trackEvent({ eventId: options })\n  }\n}\n\n// 事件\nexport const event = {\n  on: function (event, cb) {\n    bow.on && bow.on(event, cb)\n  },\n  off: function (event, cb) {\n    bow.on && bow.off(event, cb)\n  },\n  once: function (event, cb) {\n    bow.on && bow.once(event, cb)\n  }\n}\n\n// 环境检测\nexport const env = {\n  ...(aladdin.env || {})\n    // 其它\n}\n\nexport const toast = {\n  /**\n   * toast公共方法\n   * @param  {[type]}   options  [position:显示位置（top|middle|bottom）, message:显示内容]\n   * @param  {Function} callback [description]\n   * @return {[type]}            [description]\n   */\n  show: function (options, callback) {\n    let defalut = {\n      message: '默认显示',\n      position: 'bottom' // 默认显示下方\n    }\n    aladdin.toast.show(Object.assign({}, defalut, options), function (err) {\n      if (err) {\n        console.error(err.message || '调用失败')\n      } else {\n        callback && callback()\n      }\n    })\n  }\n}\n\nexport const dialog = {\n  alert: function (options, callback) {\n    let defalut = {\n      title: '提示',\n      message: '请写提示语',\n      buttonText: '确认',\n      buttonCallback: emptyFunction\n    }\n    aladdin.dialog.alert(Object.assign({}, defalut, options), function (err) {\n      if (err) {\n        console.error(err.message || '调用失败')\n      } else {\n        callback && callback()\n      }\n    })\n  },\n  confirm: function (options, callback) {\n    let defalut = {\n      title: '提示',\n      message: '是否进行选择',\n      leftButtonText: '取消',\n      leftButtonCallback: emptyFunction,\n      rightButtonText: '确定',\n      rightButtonCallback: emptyFunction\n    }\n    aladdin.dialog.confirm(Object.assign({}, defalut, options), function (err) {\n      if (err) {\n        console.error(err.message || '调用失败')\n      } else {\n        callback && callback()\n      }\n    })\n  }\n}\n"]}