{"version":3,"sources":["src/store/modules/login.js"],"names":["Axios","md5","types","state","name","password","mutations","UPDATEUSERNAME","message","username","UPDATEPASSWORD","LOGIN_SUCESS","rootState","isLogin","actions","login","loginData","commit","resolve","reject","console","log","obj","post","then","res","data","success","err"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;;AAEA,OAAO,KAAKC,KAAZ,MAAuB,aAAvB;;AAEA,IAAMC,QAAQ;AACZC,QAAM,EADM;AAEZC,YAAU;AAFE,CAAd;;AAKA,IAAMC,0DACHJ,MAAMK,cADH,YACoBJ,KADpB,EAC2BK,OAD3B,EACoC;AACtCL,QAAMM,QAAN,GAAiBD,OAAjB;AACD,CAHG,+BAIHN,MAAMQ,cAJH,YAIoBP,KAJpB,EAI2BK,OAJ3B,EAIoC;AACtCL,QAAME,QAAN,GAAiBG,OAAjB;AACD,CANG,+BAOHN,MAAMS,YAPH,YAOkBR,KAPlB,EAOyBS,SAPzB,EAOoC;AAGtCA,YAAUC,OAAV,GAAoB,IAApB;AACD,CAXG,cAAN;;AAcA,IAAMC,UAAU;AACdC,OADc,uBACuBC,SADvB,EACkC;AAAA;;AAAA,QAAvCC,MAAuC,QAAvCA,MAAuC;AAAA,QAA/Bd,KAA+B,QAA/BA,KAA+B;AAAA,QAAxBS,SAAwB,QAAxBA,SAAwB;;AAC9C,WAAO,aAAY,UAACM,OAAD,EAAUC,MAAV,EAAqB;AACtCC,cAAQC,GAAR,CAAY,eAAZ;AACAD,cAAQC,GAAR,CAAYT,SAAZ;AACA,UAAIU,MAAM;AACRlB,cAAMY,UAAUZ,IADR;AAERC,kBAAUJ,IAAIe,UAAUX,QAAd,CAFF,EAAV;AAIAe,cAAQC,GAAR;AACAD,cAAQC,GAAR;AACArB,YAAMuB,IAAN,CAAW,WAAX,EAAwBD,GAAxB,EACGE,IADH,CACQ,UAACC,GAAD,EAAS;AACb,YAAIA,IAAIC,IAAJ,CAASC,OAAb,EAAsB;AACpBV,iBAAOf,MAAMS,YAAb,EAA2BC,SAA3B;AACAM,kBAAQO,GAAR;AACD,SAHD,MAGO;AACLN,iBAAOM,GAAP;AACD;AACF,OARH,EAQK,UAACG,GAAD,EAAS;AACVR,gBAAQC,GAAR,CAAYO,GAAZ;AACAT,eAAOS,GAAP;AACD,OAXH;AAYD,KArBM,CAAP;AAsBD;AAxBa,CAAhB;;AA2BA,eAAe;AACbzB,cADa;AAEbG,sBAFa;AAGbQ;AAHa,CAAf","file":"login.js","sourceRoot":"/Users/apple/Documents/github/Javascript/vue2-paebank","sourcesContent":["import Axios from 'axios'\nimport md5 from 'md5'\n\nimport * as types from '../types.js'\n\nconst state = {\n  name: '',\n  password: ''\n}\n\nconst mutations = {\n  [types.UPDATEUSERNAME] (state, message) {\n    state.username = message\n  },\n  [types.UPDATEPASSWORD] (state, message) {\n    state.password = message\n  },\n  [types.LOGIN_SUCESS] (state, rootState) {\n    // state.name = obj.name\n    // state.password = obj.password\n    rootState.isLogin = true\n  }\n}\n\nconst actions = {\n  login ({ commit, state, rootState }, loginData) {\n    return new Promise((resolve, reject) => {\n      console.log('+++++++++++++')\n      console.log(rootState)\n      let obj = {\n        name: loginData.name,\n        password: md5(loginData.password) // md5加密\n      }\n      console.log(`-------登录-------`)\n      console.log(this)\n      Axios.post('/api/user', obj) // 将信息发送给后端\n        .then((res) => { // axios返回的数据都在res.data里\n          if (res.data.success) {\n            commit(types.LOGIN_SUCESS, rootState)\n            resolve(res)\n          } else {\n            reject(res)\n          }\n        }, (err) => {\n          console.log(err)\n          reject(err)\n        })\n    })\n  }\n}\n\nexport default {\n  state,\n  mutations,\n  actions\n}\n"]}