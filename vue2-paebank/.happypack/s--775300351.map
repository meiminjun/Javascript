{"version":3,"sources":["src/store/modules/fund.js"],"names":["types","http","api","funcNavs","native","title","classes","eventId","url","fund_rank_icon","fund_hot_icon","fund_my_collect","fund_fixed_icon","fund_my","state","toast","youxuan","hasMore","moreUrl","lists","shoufa","fund_first_icon","zhuti","fund_theme","orderDetail","records","withdraw","data","myliveDead","nomyliveDead","mycard","showlist","changecard","total","pageNumber","loading","loadState","checkState","nocard","getters","actions","getMyliveDead","options","commit","resolve","reject","request","method","qs","cardNo","currentPgs","pageSize","res","responseCode","JSON","parse","holdNum","show_list","payload","showlive","cardshow","No","TOAST","getMyliveCards","length","car_id","fa_id","mutations","NOCARD","NOMYLIVE_DEAD","C0012_INV_FUND_HOTSALE_FUND","recommendPrdList","ORDER_DETAIL","MYCARDS","CARDFIRST","MYTOTAL","MYLIVE_DEAD","tranListArray","acctArray","concat","datalist","WITHDRAW","C0012_INV_FUND_IPO_FUND","C0012_INV_FUND_THEME_FUND"],"mappings":"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","file":"fund.js","sourceRoot":"/Users/apple/Documents/github/Javascript/vue2-paebank","sourcesContent":["import * as types from '../types';\nimport { http } from '../../util/ald';\nimport api from '../../api/urls';\n\n\nconst funcNavs = [\n    {\n        native: false,\n        title: '排行',\n        classes: 'icon fund-icon-sort',\n        eventId: '0207001-理财-功能区-基金-排行',\n        url: api.fund_rank_icon\n    },\n    {\n        native: false,\n        title: '热销基金',\n        classes: 'icon fund-icon-hot-fund',\n        eventId: '0207002-理财-功能区-基金-热销基金',\n        url: api.fund_hot_icon\n    },\n    // {\n    //     title: '首发基金',\n    //     classes: 'icon fund-f-jj',\n    //     url: api.fund_first_icon'\n    // },\n    {\n        title: '我的关注',\n        native: true,\n        classes: 'icon fund-icon-my-focus',\n        eventId: '0207003-理财-功能区-基金-我的关注',\n        url: api.fund_my_collect\n    },\n    {\n        native: false,\n        title: '定投',\n        classes: 'icon fund-icon-fixed',\n        eventId: '0207004-理财-功能区-基金-定投',\n        url: api.fund_fixed_icon\n    },\n    {\n        native: true,\n        title: '我的基金',\n        classes: 'icon fund-icon-my-fund',\n        eventId: '0207005-理财-功能区-基金-我的基金',\n        url: api.fund_my\n\n    }\n    // , {\n    //     title: '保险',\n    //     classes: 'icon fund-f-bx',\n    //     url: ''\n    // }\n    // , {\n    //     title: '资产管理',\n    //     classes: 'icon fund-f-zg',\n    //     url: ''\n    // }\n    // , {\n    //     title: '商品交易所',\n    //     classes: 'icon fund-f-sp',\n    //     url: ''\n    // }\n    // , {\n    //     title: '预约管理',\n    //     classes: 'icon fund-f-yy',\n    //     url: ''\n    // }\n]\nconst state = {\n    toast: {},\n    funcNavs: funcNavs,\n    // 优选\n    youxuan: {\n        hasMore: true,\n        moreUrl: api.fund_hot_icon,\n        eventId: '0207007-理财-功能区-基金-热销基金-更多',\n        lists: []\n    },\n    // 首发\n    shoufa: {\n        hasMore: false,\n        moreUrl: api.fund_first_icon,\n        lists: []\n    },\n    // 主题\n    zhuti: {\n        native: true,\n        hasMore: false,\n        moreUrl: api.fund_theme,\n        lists: []\n    },\n    //定活通\n    orderDetail:{\n        lists:[]\n    },\n    records:{\n        lists:[]\n    },\n    withdraw:{\n        data:{}\n    },\n    //我的定活通列表\n    myliveDead:{\n        lists:[],\n    },\n\n    nomyliveDead:false,\n    //卡列表\n    mycard:{\n        lists:[]\n    },\n    //我的定活通列表数组\n    showlist:{\n\n    },\n    changecard:\"\",\n    total: \"\",\n    pageNumber:0,\n    //0初始化，1加载中，2加载到最后一页\n    loading:0,\n    loadState:false,\n    checkState:\"加载更多\",\n    nocard:false\n};\n\n// getters\nconst getters = {\n    // 暂时不使用此项，这里是过滤过期的首发基金的\n    // fundOnDate: state => {\n    //     return state.shoufa.lists.filter(fund => {\n    //         let funcEndDate = fund.saleEndDate;\n    //         return new Date(funcEndDate.substring(0, 4), funcEndDate.substring(4, 6) - 1, funcEndDate.substring(6, 8)) > new Date();\n    //     })\n    // }\n    // funcNavs: state => state.funcNavs\n}\n\n// actions\nconst actions = {\n    getMyliveDead({ commit, state }, options){\n        return new Promise((resolve,reject) => {\n            http.request({\n                method: 'GET',\n                url: \"https://rmb-stg2.pingan.com.cn:6443/bron/ibank/cust/bron-ibank-pd/superDht/checkLogin/queryDHBHold.do\",\n                qs: {\n                  cardNo:options.cardNo,\n                  currentPgs:options.currentPgs,\n                  pageSize:options.pageSize\n                }\n            }, function (res) {\n                if (res && res.responseCode == '000000') {\n                    // for(var i=0;i<res.data.datalist.length; i++){\n                    //     res.data.datalist[i].lastFourNum = res.data.datalist[i].accNo.substr(-4)\n                    // }\n                    if (res.data && typeof(res.data) == 'string') {\n                        res.data = JSON.parse(res.data);\n                    }\n                    debugger;\n                    if(res.data.holdNum!=0){\n                        commit(types[\"MYLIVE_DEAD\"], { show_list: res.data ,currentPgs:options.currentPgs,holdNum:res.data.holdNum});\n                        commit(types[\"MYTOTAL\"], {payload: res.data});\n                        resolve({showlive:false,cardshow:false,data:res.data,No:options.cardNo});\n                    }else {\n                        // commit(types[\"NOMYLIVE_DEAD\"],{payload: res.data})\n                        resolve({showlive:true,cardshow:true});\n\n                    }\n                } else {\n                    commit(types.TOAST);\n                }\n            });\n        });\n    },\n    getMyliveCards({ commit, state }, options){\n        return new Promise((resolve,reject) => {\n            // console.log(options)\n            http.request({\n                method: 'GET',\n                url: \"https://rmb-stg2.pingan.com.cn:6443/bron/ibank/cust/bron-ibank-pd/dhtCommon/checkLogin/dhtQueryCardList.do\",\n                qs: {\n                }\n            }, function (res) {\n              debugger;\n                if (res && res.responseCode == '000000') {\n                    if (res.data && typeof(res.data) == 'string') {\n                        res.data = JSON.parse(res.data);\n                    }\n                    if(res.data.length==0){\n                        resolve({data:res.data,car_id:true});\n                    }else{\n                        commit(types[\"MYCARDS\"], { payload: res.data });\n                        resolve({data:res.data,fa_id:true}); // 成功回调\n                    }\n                } else {\n                    commit(types.TOAST);\n                }\n            });\n        });\n    }\n\n}\n\n\n// mutations\nconst mutations = {\n    [types.NOCARD](state,{}) {\n        state.nocard = true;\n    },\n    [types.NOMYLIVE_DEAD](state,{payload}) {\n        state.nomyliveDead = true;\n    },\n\n\n    [types.TOAST](state, { payload }) {\n        state.toast = payload;\n    },\n    [types.C0012_INV_FUND_HOTSALE_FUND](state, { payload }) {\n        // console.log(payload)\n        state.youxuan.lists = payload.recommendPrdList;\n    },\n    [types.ORDER_DETAIL](state, { payload }) {\n        // console.log(payload)\n        state.orderDetail.lists = payload;\n    },\n    [types.MYCARDS](state, { payload }) {\n        // console.log(payload)\n        state.mycard.lists = payload;\n    },\n    [types.CARDFIRST](state, { payload }) {\n        // console.log(payload)\n        state.changecard = payload;\n    },\n\n    [types.MYTOTAL](state,  payload ) {\n\n        state.showlist = payload.payload;\n    },\n    [types.MYLIVE_DEAD](state, payload) {\n        //state.records.lists = payload.orderRecords;\n        if (payload.currentPgs==1) {\n            state.myliveDead.lists = payload.show_list.tranListArray[0].acctArray;\n        } else{\n            state.myliveDead.lists = state.myliveDead.lists.concat(payload.show_list.datalist);\n        }\n    },\n    ['DHT_LOADING_STATE'](state){\n        state.loading=1;\n    },\n    ['DHT_CHANGECARDSHOW'](state,payload){\n        state.changecard = payload;\n    },\n\n\n    [types.WITHDRAW](state, { payload }) {\n        // console.log(payload)\n        state.withdraw.data = payload;\n    },\n    [types.C0012_INV_FUND_IPO_FUND](state, { payload }) {\n        state.shoufa.lists = payload.recommendPrdList;\n    },\n    [types.C0012_INV_FUND_THEME_FUND](state, { payload }) {\n        state.zhuti.lists = payload.recommendPrdList;\n    }\n}\n\nexport default {\n    state,\n    getters,\n    actions,\n    mutations\n}\n"]}